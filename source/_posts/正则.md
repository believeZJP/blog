---
title: 正则
date: 2019-01-22 16:36:06
updated: 2019-01-22 16:36:06
tags:
- 正则
- 教程
- 笔记
---
[参考链接](https://juejin.im/post/5bf174396fb9a049ca36f13d#heading-7)

一直以来正则都靠搜索，复制粘贴。今天开始学习，以后就可以自己写啦~~~

# 常用正则表达式
1. 姓名
    - 2-9位中文昵称： `^[\u4e00-\u9fa5]{2,9}$`
2. 验证密码
    - 只能是数字、字母、下划线，长度不限制: `^\w+$`
    - 允许 小写字母 a-z、大写字母 A-Z、数字 0-9、下划线 _、 连接符 -，且长度在 6-18 位数：
    `/^[a-zA-Z0-9_-]{6,18}$/`
    - 必须包含数字+小写字母+大写字母的密码，且长度在8-10位之间：`^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,10}$`
3. 验证 Email
    - 允许有一个字符符合 [A-Za-z0-9_] 之后可以为 [A-Za-z0-9_-+.] + @ + 允许有一个字符符合 [A-Za-z0-9_] 之后可以为 [A-Za-z0-9_-.] + . + 允许有一个字符符合 [A-Za-z0-9_] 之后可以有 [A-Za-z0-9_-.] 的邮箱：^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$
4. 验证身份证
    - 18 位身份证号，尾数是数字或者字母 X：`^(\d{6})(\d{4})(\d{2})(\d{2})(\d{3})([0-9]|X)$`
    - 15 或者 18 位身份证号，尾数可以是数字及 X 或者 x：`(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)`
5. 验证手机号
    - 以 1 开头，第二位数是 3/4/5/7/8 的 11 位手机号码：`^1[3,4,5,7,8,9]\d{9}$`
    - 移动号码：`^134[0-8]\d{7}$|^(?:13[5-9]|147|15[0-27-9]|178|1703|1705|1706|18[2-478])\d{7,8}$`
    - 电信号码：`^(?:133|153|1700|1701|1702|177|173|18[019])\d{7,8}$`
    - 联通号码：`^(?:13[0-2]|145|15[56]|176|1704|1707|1708|1709|171|18[56])\d{7,8}|$`

# 常用方法
JavaScript 正则默认： 正则匹配成功就会结束，不会继续匹配。如果想查找全部，就要加标识 `g`（全局匹配）

1. test()

规则：匹配字符串，匹配成功返回true，匹配失败返回false
语法：正则.test(字符串)
案例：
```js
var str = "123abc";
var re = /\D/; // 匹配非数字
if(re.test(str)) {
    console.log("不全是数字！");
} else {
    console.log("全是数字！");
}
```

2. search()
规则：匹配成功，返回成功的位置，失败返回-1
用法：字符串.search(正则)
案例：
```js
var str = "abcdef";
var re1 = /d/i;
var re2 = /h/i;
console.log(str.search(re1)); // 3
console.log(str.search(re2)); // -1
```

3. match()
规则：匹配成功，返回匹配成功的数组，匹配不成功，返回 null
用法：字符串.match(正则)
案例：
```js
var str = "123fadf321dfadf4fadf1";
var re = /\d+/g;
console.log(str.match(re)); //(4) ["123", "321", "4", "1"]
```

4. replace()
规则：匹配陈宫的字符串替换成新的字符串。
用法：字符串.replace(正则, 新的字符串)
案例：
```js
var str = 'aaa';
var re = /a+/g;
str = str.replace(re, "b");
console.log(str); // b
```

敏感词替换
```js
var s1 = '非诚勿扰在中国船的监视之下寸步难行';
var re = /非诚|中国船|监视之下/g;
s1.replace(re, function(str) {
    return '*'.repeat(str.length);
})
```

# 正则解析

看一个简单的正则：`^[a-z0-9_-]{6,12}$`

- ^表示匹配字符串的开始位置
- [a-z0-9_-]表示字符串的开头可以为`a-z`的字母, `0-9`的数字, `_`下划线, `-`连接符
    - [a-z] 表示匹配 a-z 中任意单个字母；
    - [0-9] 表示匹配 0-9 中任意单个数字；
    - [_] 表示匹配下划线；
    - [-] 表示匹配连接符 -。
    所以，将前面的连起来，[a-z0-9_-] 表示字符串可以包含数字、字母、_、- 这四种形式的字符串。
- {6, 12} 表示该字符串的长度为 6-12 位。
- `$`表示结束标志，`^` 表示开始

> `^` 与 `$` 同时使用，表示精确匹配。


综上：这个正则表达式的用途校验字符串只能包含小写字母，数字，下划线，连接字符，并且最长12位，最短6位。


## 在JavaScript中使用
用`/正则表达式/`两个斜杠来包裹要写的正则表达式
`var reg = /^[a-z0-9_-]{6,12}$/`

这就是一条规则。

如何匹配一个字符串。这里用test方法

```js
var str = 'abc-cba_abc';
var reg = /^[a-z0-9_-]{6,12}$/;
console.log(reg.test(str)); // true

```
reg 通过 test() 方法去测试 str 是否符合 reg的规则，如果符合则返回 true，如果不符合则返回 false。
这里返回的是 true，因为我们的 str 是符合 reg 规则的。

### 小栗子🌰🌰🌰

```js
var str = "Cheer for yourself";
var reg1 = /^Cheer/;
var reg2 = /yourself$/;
var reg3 = /for/;
console.log(reg1.test(str));
console.log(reg2.test(str));
console.log(reg3.test(str));
```
 第一个判断该字符串是否以 Cheer 开头；
 第二个判断该字符串是否以 yourself 结尾；
 第三个判断该字符串是否包含 for。

## ()匹配子项

|表达式|	释义|	用法|
|-----|-------|------|
|(子表达式)|标记一个子表达式的开始和结束位置。|	(\w)\1 能匹配 deep 中的 ee|
```js

```


